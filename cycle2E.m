clear
clc
NA=[372	232.5	264	2.4
373	202	223	1.9
374	241	210	2.4
375	235	197.5	2.6
376	228	173	2.6
377	214	164	2.6
378	278	196	2.6
379	267	168	2.4
380	90	167	1
381	123	177.5	1.1
382	143	153	1.9
383	192	264	2.6
384	145	285	2.4
385	133	255	2.4
386	90	198	1.7
387	21	15	1.1
388	60	68	0.8
389	70	84	0.2
390	27	149	1.6
391	62	143	0.9
392	58	176	1.4
393	58	160	0.6
394	72	163	0.7
395	70	176.5	0.7
396	90	178	0.8
397	115	168	0.6
398	115	177.5	0.8
399	123	168	0.7
400	123	164	0.6
401	123	155	0.7
402	143	164	0.9
403	144	168	1.2
404	149	177	0.9
405	128	178	0.9
406	128	188	1.5
407	164	194	1.7
408	156	177	0.8
409	168	177	1.1
410	156	169	0.8
411	167	168	0.8
412	172	167	0.9
413	167	164	0.2
414	160	164	0.7
415	163	153.5	1.2
416	186	168	1.6
417	269	133	1.6
418	295	112	1.1
419	302	112	1.4
420	316	141	1.6
421	278	143	1.7
422	284	173	1.4
423	257.5	170	1.9
424	239	198	0.4
425	241	198	0.3
426	246	199	0.6
427	246.5	202	0.4
428	240	202	0.4
429	236	201	1.1
430	231	199	0.1
431	232	206.5	0.6
432	239.5	207.5	0.5
433	242	206	0.2
434	235	209.5	0.4
435	237.5	212	0.1
436	246	208	0.4
437	200	194	1.1
438	170	222	1.6
439	59	189	0.8
440	72	189	0.9
441	90	187.5	0.6
442	74	198	0.7
443	60	196	0.4
444	90	211	1.6
445	151	236	1.4
446	160	244	1.5
447	90	222	0.8
448	129	248	1.7
449	142	265	2.1
450	152	255.5	1.1
451	155	258	0.6
452	163	258	0.8
453	171	258	1.1
454	171	252.5	0.4
455	171	247	1.2
456	214	235	1.1
457	244	238	1.1
458	268	237	1.1
459	259	255	1.1
460	188	261	1.4
461	184	253	1.2
462	171	263	1.1
463	171	268	0.8
464	163	268	0.9
465	154	268.5	0.7
466	151	275	0.4
467	148	274	1.5
468	162	277.5	1.5
469	177	281	0.7
470	187	284	1.4
471	155	316	1.6
472	159	292	1.8
473	125	267	1.8
474	107	285	1.6
];%%路口节点.

PA=[372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
];

LA=[373	431
373	438
373	456
374	436
375	424
375	429
375	430
376	375
377	416
377	417
377	376
378	458
379	423
380	397
381	399
381	405
382	402
383	460
384	467
384	473
385	449
385	473
386	442
386	444
387	388
387	390
388	389
388	391
390	391
392	393
392	395
392	439
393	391
393	394
394	395
394	380
395	396
395	440
396	380
396	398
396	441
397	398
398	381
399	400
399	403
400	401
400	402
401	382
402	403
402	414
403	404
403	410
404	405
404	407
404	408
405	406
406	407
407	437
407	438
408	409
408	410
409	411
410	411
411	412
412	413
412	416
413	414
414	415
415	416
416	437
417	418
417	421
418	419
419	420
420	421
420	422
421	379
422	379
423	376
423	424
423	378
424	425
424	429
425	426
425	428
426	427
427	378
427	428
427	436
428	429
428	433
429	431
429	432
431	434
432	433
432	434
432	374
434	435
435	374
437	373
438	446
439	440
439	443
440	441
440	442
441	386
442	443
444	445
445	446
446	455
447	444
447	448
448	445
448	385
449	450
449	467
450	446
450	451
451	452
451	465
452	453
453	454
453	462
454	455
454	461
455	456
456	457
456	372
457	374
457	458
457	372
458	459
460	461
460	462
462	463
463	464
464	452
465	466
466	467
466	468
468	464
468	469
469	463
469	470
470	383
471	472
472	468
472	384
474	447
474	473
474	471];

for i=1: length(NA);
for j=1: length(NA);
a(i,j)=inf;
end
end
for i=1: length(NA)
a(i,i)=0;
end
for i=1:length(LA)
x1=NA((LA(i,1)-371),2);%改
y1=NA((LA(i,1)-371),3);%改
x2=NA((LA(i,2)-371),2);%改
y2=NA((LA(i,2)-371),3);%改
d=((x2-x1)^2+(y2-y1)^2)^0.5;
a(LA(i,1)-371, LA(i,2)-371)=d;%改
a(LA(i,2)-371, LA(i,1)-371)=d;%改
end %%a为邻接矩阵
[D,R]=floyd(a);
P=[]
for m=387:474
    m
    for n=387:474
        for o=387:474
            for q=387:474
                for p=387:474
           PA(9)=m;
           PA(10)=n;
           PA(11)=o;
           PA(12)=q;
           PA(13)=p;
S=D(:,PA-371);%改
[min_S,index]=min(S,[],2);
%A=[index,NA(:,4)];
%A1 = A(:,1);
%A2 = A(:,2);
%B1 = unique(index);
%B2 = arrayfun(@(a)sum(A2(A1==a)),B1);


if max(min_S)<=30%&&max(B2)<=10;
   P(end+1,1)=m;
   P(end,2)=n;
   P(end,3)=o;
   P(end,4)=q;
   %P(end,5)=p
end
   end
    end
    end
    end
end
xlswrite('DP',P)
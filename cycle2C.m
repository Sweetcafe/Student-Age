clear
clc
NA=[166	137.5	462	2.6
167	167	399	2.2
168	376	400	1.4
169	210	390	2.6
170	263	445	2.2
171	284	409	1.9
172	278.5	425	2.2
173	295	382	2
174	299	444	2.6
175	362	443	2.2
176	410	408.5	2.1
177	395	520	2.2
178	277	496	1.7
179	235	465	2.2
180	200	466.5	1.9
181	167	462	2.4
182	225	443	2.4
183	400	447	1.2
184	414	422	1.4
185	424	400	1.2
186	411	396	1.4
187	420	401	0.8
188	403	404	1.2
189	376	406	0.9
190	380	404	0.8
191	377	424	0.8
192	374	424	0.8
193	370	423	0.4
194	368	427.5	0.9
195	374	431	1.2
196	365	448	1.4
197	356	450	1.4
198	358	459	1.2
199	354	495	1.1
200	357	513	1.2
201	359	528	0.4
202	347	553	0.5
203	261	537.5	0.8
204	270	514	1.4
205	313	511.5	0.4
206	324	511	0.8
207	333	511	0.7
208	334	497	0.8
209	323	497	0.7
210	312	498	1.1
211	317	451	1.1
212	316	448	0.8
213	315.5	444	0.7
214	316	434	0.9
215	318	412	1.2
216	291.5	415	1.4
217	284	425	1.4
218	281	421	1.6
219	299	434	1.4
220	302	451	1.4
221	305	457	1.2
222	281	458.5	1.1
223	274	448	0.8
224	273.5	444	0.9
225	267	446	1.1
226	270	440	0.9
227	275	422	1.1
228	276	419	1.2
229	270	415	0.8
230	276	405	1.4
231	288	403	1.4
232	293.5	392.5	1.4
233	296	387	1.1
234	303	386	1.4
235	298.5	378	1.6
236	293	376	1.2
237	296	372	1.7
238	276	352	1
239	250	350	1.4
240	247	384	1.2
241	262	399	1.4
242	269	397	1.2
243	276	402	1.3
244	282	398.5	1.2
245	282	386.5	1.1
246	273	389	1.2
247	276	361	1.1
248	138.5	378	0.8
249	155	396	1.2
250	163	390	1.5
251	173	364	1.2
252	183	370	1.2
253	238	382	0.7
254	213	412	0.8
255	189	413	1.1
256	210	433	0.9
257	201	434	0.9
258	150	400	1.2
259	135	395	1.2
260	143	407	1.1
261	142	414	0.8
262	140	430	1.1
263	121	432	0.9
264	109	441	0.5
265	138.5	442	1.2
266	167	442	1.6
267	168	435	1.4
268	184	440	1.2
269	194	442	0.9
270	200	442	1.4
271	212	443	1.6
272	220	443	1.7
273	246	444	2.1
274	246	455	1.4
275	252	458	1.2
276	257	460.5	1.5
277	255.5	466	1.2
278	249	464	1.1
279	247	469	0.8
280	254	472	0.7
281	251.5	477	1.1
282	259	478	0.8
283	261	470	0.4
284	255	494	1.4
285	240	495	1.4
286	241	514	0.8
287	236	514	0.7
288	235	496	0.7
289	232	487	0.8
290	235.5	486.5	0.8
291	245	474	1.2
292	225	457.5	1.4
293	225	451	1.6
294	219	451	1.4
295	219	462	1.2
296	228.5	472	1.6
297	213	481	1.4
298	211	487	1
299	208.5	496	1.2
300	206	507	0.8
301	206	515	1.2
302	200	514	0.7
303	200	507	1.2
304	200	497	1.3
305	200	484	1.4
306	206	466	1.4
307	194	466	1.4
308	184	463.5	1.5
309	184	475	0.8
310	193.5	475	0.7
311	193	484	0.9
312	184	484	0.6
313	184	496.5	0.8
314	192.5	496.5	0.7
315	192	507	0.9
316	192	514	0.8
317	170	516.5	0.6
318	168	507	1.1
319	167	495.5	1.4

];%%A区路口节点.

PA=[166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
];

LA=[166	265
166	181
167	250
167	255
168	189
170	225
170	227
171	228
171	216
171	231
172	219
173	233
173	232
173	236
174	213
174	220
175	197
175	196
176	184
176	187
178	210
178	284
179	291
179	274
180	305
180	270
180	306
180	307
181	308
182	273
183	184
183	196
184	185
185	186
186	168
187	185
187	186
188	176
188	186
189	190
189	192
190	191
191	192
192	193
194	193
194	175
195	194
195	188
195	196
196	197
196	198
198	177
198	199
199	200
200	201
201	177
201	202
203	202
203	204
204	205
204	178
205	206
205	210
206	207
207	200
207	208
208	199
209	206
209	208
210	209
210	211
211	212
212	213
213	214
215	214
215	175
216	215
216	217
218	217
218	172
219	214
219	174
220	212
221	211
221	220
221	222
222	220
222	178
222	223
223	224
224	174
225	223
225	226
226	224
226	172
227	172
227	228
228	218
229	228
229	230
230	171
231	232
232	233
233	234
234	168
235	234
235	173
236	237
237	235
237	238
238	239
239	240
240	241
241	242
242	243
243	230
243	244
244	231
245	244
245	232
245	236
246	241
246	242
246	245
246	247
247	237
247	238
248	239
248	249
249	167
250	251
250	252
251	252
252	253
253	240
253	254
254	169
255	256
256	257
258	249
258	260
259	258
259	248
259	260
261	260
261	262
262	263
262	267
263	261
263	264
265	262
266	181
266	265
266	267
267	255
267	268
268	269
269	270
270	257
270	271
271	256
271	272
271	295
272	182
273	170
273	241
274	273
274	275
275	276
276	170
276	277
277	278
277	283
278	275
279	278
279	280
280	277
280	281
281	282
282	283
284	282
285	284
285	281
286	285
286	204
286	203
286	287
287	288
288	285
289	288
289	290
290	285
290	291
291	281
291	279
292	179
292	293
293	182
293	274
294	292
294	293
294	272
295	292
295	296
296	179
296	290
297	296
298	289
298	297
299	298
299	288
300	299
300	301
301	287
302	301
302	303
303	300
303	304
304	299
305	304
306	297
307	269
308	307
308	268
308	309
309	310
309	312
310	307
310	311
311	305
312	311
312	313
313	314
314	311
314	304
315	303
315	314
315	316
316	302
317	264
317	203
317	316
317	318
318	315
318	319
319	181
319	313];

for i=1: length(NA);
for j=1: length(NA);
a(i,j)=inf;
end
end
for i=1: length(NA)
a(i,i)=0;
end
for i=1:length(LA)
x1=NA((LA(i,1)-165),2);%改
y1=NA((LA(i,1)-165),3);%改
x2=NA((LA(i,2)-165),2);%改
y2=NA((LA(i,2)-165),3);%改
d=((x2-x1)^2+(y2-y1)^2)^0.5;
a(LA(i,1)-165, LA(i,2)-165)=d;%改
a(LA(i,2)-165, LA(i,1)-165)=d;%改
end %%a为邻接矩阵
[D,R]=floyd(a);
P=[]
for m=183:319
    m
    for n=183:319
        for o=183:319
            for q=183:319
               % for p=183:319
           PA(9)=m;
           PA(10)=n;
           PA(11)=o;
           PA(12)=q;
           %PF(13)=p
S=D(:,PA-165);%改
[min_S,index]=min(S,[],2);
%A=[index,NA(:,4)];
%A1 = A(:,1);
%A2 = A(:,2);
%B1 = unique(index);
%B2 = arrayfun(@(a)sum(A2(A1==a)),B1);


if max(min_S)<=50%&&max(B2)<=10;
   P(end+1,1)=m;
   P(end,2)=n;
   P(end,3)=o;
   P(end,4)=q
   %P(end,5)=p
end
   end
    %end
        end
    end
end
xlswrite('CP',P)





clear
clc
NA=[1	413	359	1.7
2	403	343	2.1
3	383.5	351	2.2
4	381	377.5	1.7
5	339	376	2.1
6	335	383	2.5
7	317	362	2.4
8	334.5	353.5	2.4
9	333	342	2.1
10	282	325	1.6
11	247	301	2.6
12	219	316	2.4
13	225	270	2.2
14	280	292	2.5
15	290	335	2.1
16	337	328	2.6
17	415	335	2.5
18	432	371	1.9
19	418	374	1.8
20	444	394	1.9
21	251	277	1.4
22	234	271	1.4
23	225	265	2.4
24	212	290	1.1
25	227	300	1.6
26	256	301	1.2
27	250.5	306	0.8
28	243	328	1.3
29	246	337	1.4
30	314	367	2.1
31	315	351	1.6
32	326	355	1.5
33	327	350	1.4
34	328	342.5	1.7
35	336	339	1.4
36	336	334	1.1
37	331	335	0.1
38	371	330	1.2
39	371	333	1.4
40	388.5	330.5	1.7
41	411	327.5	1.4
42	419	344	1.4
43	411	343	1.7
44	394	346	1.1
45	342	342	1.4
46	342	348	1.2
47	325	372	1.6
48	315	374	1.4
49	342	372	1.2
50	345	382	1.1
51	348.5	380.5	0.8
52	351	377	0.6
53	348	369	1.4
54	370	363	0.9
55	371	353	1
56	354	374	0.5
57	363	382.5	0.8
58	357	387	1.1
59	351	382	0.9
60	369	388	0.7
61	335	395	0.6
62	381	381	1.2
63	391	375	1.4
64	392	366	0.8
65	395	361	0.7
66	398	362	0.8
67	401	359	0.8
68	405	360	0.9
69	410	355	1.1
70	408	350	0.9
71	415	351	1.1
72	418	347	0.8
73	422	354	0.9
74	418.5	356	1.1
75	405.5	364.5	0.8
76	405	368	1.1
77	409	370	0.8
78	417	364	0.8
79	420	370	0.8
80	424	372	0.8
81	438	368	1.4
82	438.5	373	1.1
83	434	376	0.9
84	438	385	1
85	440	392	1.2
86	447	392	1.4
87	448	381	1.1
88	444.5	383	0.9
89	441	385	1.4
90	440.5	381.5	0.9
91	445	380	0.9
92	444	360	0.8];%%A区路口节点.

EA=[12
14
16
21
22
23
24
28
29
30
38
48
62];

PA=[1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20];

LA=[1	75
1	78
2	44
3	45
3	65
4	39
4	63
5	49
5	50
6	59
7	32
7	47
8	9
8	47
9	35
10	34
11	22
11	26
12	25
14	21
15	7
15	31
16	14
16	38
17	40
17	42
17	81
18	81
18	83
19	79
20	86
21	22
22	13
23	13
24	13
24	25
25	11
26	27
26	10
27	12
28	29
28	15
29	30
30	7
30	48
31	32
31	34
32	33
33	34
33	8
34	9
35	45
36	35
36	37
36	16
36	39
37	7
38	39
38	41
39	40
40	2
41	17
41	92
42	43
43	2
43	72
44	3
45	46
46	8
46	55
47	48
47	6
47	5
48	61
49	50
49	53
50	51
51	52
51	59
52	56
53	52
53	54
54	55
54	63
55	3
56	57
57	58
57	60
57	4
58	59
60	62
61	60
62	4
62	85
63	64
64	65
64	76
65	66
66	67
66	76
67	44
67	68
68	69
68	75
69	70
69	71
69	1
70	2
70	43
71	72
71	74
72	73
73	74
73	18
74	1
74	80
75	76
76	77
77	78
77	19
78	79
79	80
80	18
81	82
82	83
82	90
83	84
84	85
85	20
86	87
86	88
87	88
87	92
88	89
88	91
89	20
89	84
89	90
90	91
91	92];

for i=1: length(NA);
for j=1: length(NA);
a(i,j)=inf;
end
end
for i=1: length(NA)
a(i,i)=0;
end
for i=1:length(LA)
x1=NA(LA(i,1),2);
y1=NA(LA(i,1),3);
x2=NA(LA(i,2),2);
y2=NA(LA(i,2),3);
d=((x2-x1)^2+(y2-y1)^2)^0.5;
a(LA(i,1), LA(i,2))=d;
a(LA(i,2), LA(i,1))=d;
end %%a为邻接矩阵
[D,R]=floyd(a);

for m=28:92
    m
    for n=28:92
        for o=28:92
            for q=28:92
           PA(21)=q;
           PA(22)=o;
           PA(23)=n;
           PA(24)=m;
S=D(:,PA);
[min_S,index]=min(S,[],2);

A=[index,NA(:,4)];
A1 = A(:,1);
A2 = A(:,2);
B1 = unique(index);
B2 = arrayfun(@(a)sum(A2(A1==a)),B1);

if max(min_S)<=30&&max(B2)<=10;
   PA
end
    end
    end
    end
end



